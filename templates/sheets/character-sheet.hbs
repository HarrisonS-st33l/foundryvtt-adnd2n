<form class="{{cssClass}}" autocomplete="off">
    <nav class="sheet-tabs tabs" data-group="primary">
        <a data-tab="description">{{localize "adnd2n.sheet.description"}}</a>
        <a data-tab="weapons">{{localize "adnd2n.sheet.weapons"}}</a>
    </nav>
    <section class="sheet-body">
        <div class="tab description" data-group="primary" data-tab="description">
            <section class="character-header">
                <section class="row row1">
                    <div class="form-text"><label for="playerName">{{localize "adnd2n.character.playerName"}}</label><input name="data.playerName" id="playerName" type="text" value="{{data.playerName}}"/></div>
                    <div class="form-text"><label for="characterName">{{localize "adnd2n.character.characterName"}}</label><input name="data.characterName" id="characterName" type="text" value="{{data.characterName}}"/></div>
                </section>
                <section class="row row2">
                    <div class="form-text"><label for="race">{{localize "adnd2n.character.race"}}</label><input name="data.race" id="race" type="text" value="{{data.race}}"/></div>
                    <div class="form-text"><label for="movementSpeed">{{localize "adnd2n.character.movementSpeed"}}</label><input name="data.movementSpeed" id="movementSpeed" type="text" value="{{data.movementSpeed}}"/></div>
                    <div class="form-text"><label for="class">{{localize "adnd2n.character.class"}}</label><input name="data.class" id="class" type="text" value="{{data.class}}"/></div>
                    <div class="form-text"><label for="alignment">{{localize "adnd2n.character.alignment"}}</label><input name="data.alignment" id="alignment" type="text" value="{{data.alignment}}"/></div>
                </section>
                <section class="row row3">
                    <div class="form-text"><label for="hair">{{localize "adnd2n.character.appearance.hair"}}</label><input name="data.appearance.hair" id="hair" type="text" value="{{data.appearance.hair}}"/></div>
                    <div class="form-text"><label for="eyes">{{localize "adnd2n.character.appearance.eyes"}}</label><input name="data.appearance.eyes" id="eyes" type="text" value="{{data.appearance.eyes}}"/></div>
                    <div class="form-text"><label for="size">{{localize "adnd2n.character.size"}}</label><input name="data.size" id="size" type="text" value="{{data.size}}"/></div>
                    <div class="form-text"><label for="sex">{{localize "adnd2n.character.appearance.sex"}}</label><input name="data.appearance.sex" id="sex" type="text" value="{{data.appearance.sex}}"/></div>
                </section>
                <section class="row row4">
                    <div class="form-text"><label for="appearance">{{localize "adnd2n.character.appearance.misc"}}</label><input name="data.appearance.misc" id="appearance" type="text" value="{{data.appearance.misc}}"/></div>
                    <div class="form-text"><label for="age">{{localize "adnd2n.character.age"}}</label><input name="data.age" id="age" type="text" value="{{data.age}}"/></div>
                    <div class="form-text"><label for="handed">{{localize "adnd2n.character.handed"}}</label><input name="data.handed" id="handed" type="text" value="{{data.handed}}"/></div>
                </section>
            </section>
            <br>
            <section class="character-stats">
                <section class="row strength" data-ability="strength">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.strength.str"}}</a></div>
                    <div class="value"><input name="data.attributes.strength.value" type="text" value="{{data.attributes.strength.value}}"></div>
                    <div class="form-text"><label for="hitAdjust">{{localize "adnd2n.attributes.strength.hitAdjust"}}</label><span id="hitAdjust">{{data.attributes.strength.hitAdjust}}</span></div>
                    <div class="form-text"><label for="damageAdjust">{{localize "adnd2n.attributes.strength.damageAdjust"}}</label><span id="damageAdjust">{{data.attributes.strength.damageAdjust}}</span></div>
                    <div class="form-text"><label for="weightAllowance">{{localize "adnd2n.attributes.strength.weightAllowance"}}</label><span id="weightAllowance">{{data.attributes.strength.weightAllowance}}</span></div>
                    <div class="form-text"><label for="maxPress">{{localize "adnd2n.attributes.strength.maxPress"}}</label><span id="maxPress">{{data.attributes.strength.maxPress}}</span></div>
                    <div class="form-text"><a class="rollable-derived"  data-base="d20"><label for="openDoors">{{localize "adnd2n.attributes.strength.openDoors"}}</label><span id="openDoors">{{data.attributes.strength.openDoors}}</span></a></div>
                    <div class="form-text"><a class="rollable-derived"  data-base="d100"><label for="bendBars">{{localize "adnd2n.attributes.strength.bendBars"}}</label><span id="bendBars">{{data.attributes.strength.bendBars}}%</span></a></div>
                </section>
                <section class="row dexterity" data-ability="dexterity">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.dexterity.dex"}}</a></div>
                    <div class="value"><input name="data.attributes.dexterity.value" type="text" value="{{data.attributes.dexterity.value}}"></div>
                    <div class="form-text"><label for="hitAdjust">{{localize "adnd2n.attributes.dexterity.hitAdjust"}}</label><span id="hitAdjust">{{data.attributes.dexterity.hitAdjust}}</span></div>
                    <div class="form-text"><label for="defAdjust">{{localize "adnd2n.attributes.dexterity.defAdjust"}}</label><span id="defAdjust">{{data.attributes.dexterity.hitAdjust}}</span></div>
                </section>
                <section class="row constitution" data-ability="constitution">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.constitution.con"}}</a></div>
                    <div class="value"><input name="data.attributes.constitution.value" type="text" value="{{data.attributes.constitution.value}}"></div>
                    <div class="form-text"><label for="hpAdjust">{{localize "adnd2n.attributes.constitution.hpAdjust"}}</label><span id="hpAdjust">{{data.attributes.constitution.hpAdjust}}</span></div>
                    <div class="form-text"><a class="rollable-derived" data-base="d100"><label for="systemShock">{{localize "adnd2n.attributes.constitution.systemShock"}}</label><span id="systemShock">{{data.attributes.constitution.systemShock}}%</span></a></div>
                    <div class="form-text"><a class="rollable-derived" data-base="d100"><label for="resurrectionSurvival">{{localize "adnd2n.attributes.constitution.resurrectionSurvival"}}</label><span id="resurrectionSurvival">{{data.attributes.constitution.resurrectionSurvival}}%</span></a></div>
                    <div class="form-text"><label for="poisonSave">{{localize "adnd2n.attributes.constitution.poisonSave"}}</label><span id="poisonSave">{{data.attributes.constitution.poisonSave}}</span></div>
                    <div class="form-text"><label for="regeneration">{{localize "adnd2n.attributes.constitution.regeneration"}}</label><span id="regeneration">{{data.attributes.constitution.regeneration}}</span></div>
                </section>
                <section class="row intelligence" data-ability="intelligence">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.intelligence.int"}}</a></div>
                    <div class="value"><input name="data.attributes.intelligence.value" type="text" value="{{data.attributes.intelligence.value}}"></div>
                    <div class="form-text"><label for="languages">{{localize "adnd2n.attributes.intelligence.languages"}}</label><span id="languages">{{data.attributes.intelligence.languages}}</span></div>
                    <div class="form-text"><label for="maxSpellLevel">{{localize "adnd2n.attributes.intelligence.maxSpellLevel"}}</label><span id="maxSpellLevel">{{data.attributes.intelligence.maxSpellLevel}}</span></div>
                    <div class="form-text"><a class="rollable-derived" data-base="d100"><label for="spellLearnChance">{{localize "adnd2n.attributes.intelligence.spellLearnChance"}}</label><span id="spellLearnChance">{{data.attributes.intelligence.spellLearnChance}}%</span></a></div>
                    <div class="form-text"><label for="maxSpellsPerLevel">{{localize "adnd2n.attributes.intelligence.maxSpellsPerLevel"}}</label><span id="maxSpellsPerLevel">{{data.attributes.intelligence.maxSpellsPerLevel}}</span></div>
                </section>
                <section class="row willpower" data-ability="willpower">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.willpower.wil"}}</a></div>
                    <div class="value"><input name="data.attributes.willpower.value" type="text" value="{{data.attributes.willpower.value}}"></div>
                    <div class="form-text"><label for="defAdjust">{{localize "adnd2n.attributes.willpower.defAdjust"}}</label><span id="defAdjust">{{data.attributes.willpower.defAdjust}}</span></div>
                    <div class="form-text"><label for="bonusSpells">{{localize "adnd2n.attributes.willpower.bonusSpells"}}</label><span id="bonusSpells">{{data.attributes.willpower.bonusSpellsPrintable}}</span></div>
                    <div class="form-text"><a class="rollable-derived" data-base="d100" data-inverse="true"><label for="spellFailure">{{localize "adnd2n.attributes.willpower.spellFailure"}}</label><span id="spellFailure">{{data.attributes.willpower.spellFailure}}%</span></a></div>
                </section> 
                <section class="row charisma" data-ability="charisma">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.charisma.chr"}}</a></div>
                    <div class="value"><input name="data.attributes.charisma.value" type="text" value="{{data.attributes.charisma.value}}"></div>
                    <div class="form-text"><label for="henchmen">{{localize "adnd2n.attributes.charisma.henchmen"}}</label><span id="henchmen">{{data.attributes.charisma.henchmen}}</span></div>
                    <div class="form-text"><label for="loyaltyBase">{{localize "adnd2n.attributes.charisma.loyaltyBase"}}</label><span id="loyaltyBase">{{data.attributes.charisma.loyaltyBase}}</span></div>
                    <div class="form-text"><label for="reactionAdjust">{{localize "adnd2n.attributes.charisma.reactionAdjust"}}</label><span id="reactionAdjust">{{data.attributes.charisma.reactionAdjust}}</span></div>
                </section>
                <section class="row perception" data-ability="perception">
                    <div class="attribute"><a class="rollable-attribute">{{localize "adnd2n.attributes.perception.pcp"}}</a></div>
                    <div class="value"><input name="data.attributes.perception.value" type="text" value="{{data.attributes.perception.value}}"></div>
                    <div class="form-text"><a class="rollable-surprise"><label for="surpriseAdjust">{{localize "adnd2n.attributes.perception.surpriseAdjust"}}</label></a><span id="surpriseAdjust">{{data.attributes.perception.surpriseAdjust}}</span></div>
                    <div class="form-text"><label for="illusionImmunity">{{localize "adnd2n.attributes.perception.illusionImmunity"}}</label><span id="illusionImmunity">{{data.attributes.perception.illusionImmunity}}{{#ifNotEquals data.attributes.perception.illusionImmunity 'None'}} {{localize "adnd2n.attributes.perception.level"}}{{/ifNotEquals}}</span></div>
                </section>
            </section>
            <br>
            <span class="character-combat-row">
                <section class="character-saves">
                    <table>
                        {{#each data.savingThrows as |savingThrow value|}}
                        <tr class="savingThrow" data-saving-throw="{{@key}}">
                            <th class="savingThrow-name"><a class="rollable-save">{{localize (concat "adnd2n.savingThrows." @key)}}</a></th>
                            <td class="savingThrow-value"><input name={{concat "data.savingThrows." @key}} value={{savingThrow}}></td>
                        </tr>
                        {{/each}}   
                    </table>
                </section>
                <div></div>
                <section class="character-hp">
                    <div class="maxHp"><label for"maxHp">{{localize "adnd2n.character.hp.max"}}</label><input id="maxHp" name="data.health.max" type="text" value={{data.health.max}}></div>
                    <div class="currHp"><label for"currHp">{{localize "adnd2n.character.hp.current"}}</label><input id="currHp" name="data.health.value" type="text" value={{data.health.value}}></div>
                    <div class="tempHp"><label for"tempHp">{{localize "adnd2n.character.hp.temp"}}</label><input id="tempHp" name="data.health.temp" type="text" value={{data.health.temp}}></div>
                </section>
                <div></div>
                <section class="character-ac">

                </section>
            </span>
        </div>
        <div class="tab weapons", data-group="primary", data-tab="weapons">
            <section class="weapon-list">
                <table>
                    <tr class="flexrow weapon-header">
                        <th class="weapon-name">{{localize "adnd2n.weapon.weapon"}}</th>
                        <th class="weapon-toHit">{{localize "adnd2n.weapon.toHit"}}</th>
                        <th class="weapon-toDam">{{localize "adnd2n.weapon.toDam"}}</th>    
                        <th class="weapon-damage">{{localize "adnd2n.weapon.damage"}}</th>
                        <th class="weapon-range">{{localize "adnd2n.weapon.range"}}</th>
                        <th class="weapon-type">{{localize "adnd2n.weapon.type"}}</th>
                        <th class="weapon-speed">{{localize "adnd2n.weapon.speed"}}</th>
                        <th class="weapon-controls">
                            <a class="weapon-control weapon-create" title="createWeapon" data-type="weapon"><i class="fas fa-plus"></i></a>
                        </th>
                    </tr>
                    {{#each actor.items as |item id|}}
                    {{#ifEquals item.type "weapon"}}
                    <tr class ="flexrow weapon item" data-item-id="{{item._id}}">
                        <td class="weapon-stat weapon-name"><a class="rollable-item">{{item.name}}</a></td>
                        <td class="weapon-stat weapon-toHit">{{concat '+' item.data.toHit}}</td>
                        <td class="weapon-stat weapon-toDam">{{concat '+' item.data.toDam}}</td>
                        <td class="weapon-stat weapon-damage">{{item.data.damage}}</td>
                        {{#unless item.data.reach}}
                        <td class="weapon-stat weapon-range">{{concat item.data.shortRange '/' item.data.mediumRange '/' item.data.longRange 'yds'}}</td>
                        {{else}}
                        <td class="weapon-stat weapon-range">{{item.data.reach}}</td>
                        {{/unless}}
                        <td class="weapon-stat weapon-type">{{localize (concat 'adnd2n.attack.' item.data.type)}}</td>
                        <td class="weapon-stat weapon-speed">{{item.data.speed}}</td>
                        <td class="weapon-stat weapon-controls">
                            <a class="weapon-control weapon-edit" title="editWeapon" data-type="item"><i class="fas fa-edit"></i></a>
                            <a class="weapon-control weapon-delete" title="deleteWeapon" data-type="item"><i class="fas fa-trash"></i></a>
                        </td>
                    </tr>
                    {{/ifEquals}}
                    {{/each}}
                </table>
            </section>
        </div>
    </section>
</form>